import pytest

from bentley_ottmann_api.bentley_ottmann import find_intersections


@pytest.mark.parametrize(
    "lines, output",
    (
        (
            [
                [(0.8, 6.1), (11.72, 9.32)],
                [(6.84, 3.56), (15.06, 8.38)],
                [(3.5, 8.17), (10.44, 4.08)],
                [(13.32, 4.22), (2.42, 12.67)],
            ],
            [
                (4.9406618753133875, 7.320964399130871),
                (8.11320729830732, 8.25645856232139),
                (9.086820753057225, 4.877478835734286),
                (11.014110838791117, 6.007592973597712),
            ],
        ),
        (
            [
                [(0.8, 6.1), (11.72, 9.32)],
                [(6.84, 3.56), (15.06, 8.38)],
                [(3.5, 8.17), (10.44, 4.08)],
                [(13.32, 4.22), (2.42, 12.67)],
                [(5.39, 5.68), (8.39, 11.23)],
                [(9.5, 3.91), (11, 10.06)],
            ],
            [
                (4.9406618753133875, 7.320964399130871),
                (5.95415027467659, 6.723678008151692),
                (6.530395713107997, 7.789732069249794),
                (7.175584483662415, 8.983331294775468),
                (8.113207298307321, 8.25645856232139),
                (9.086820753057225, 4.877478835734286),
                (9.654387905604722, 4.54299041297935),
                (9.844304411051866, 5.321648085312652),
                (10.171019947308995, 6.661181783966881),
                (10.749730458221023, 9.0338948787062),
                (11.014110838791117, 6.007592973597712),
            ],
        ),
        (
            [
                [
                    (2.0681655529586, 6.7721029389621),
                    (3.8750905945826, 4.7795349136096),
                ],
                [
                    (3.7637048043455, 5.0765636875751),
                    (2.5013325149917, 2.9107288774094),
                ],
                [
                    (2.4146991225851, 3.1706290546293),
                    (4.4196433468528, 1.6731089858861),
                ],
                [
                    (4.1844955674634, 1.7597423782927),
                    (7.1547833071193, 2.8612240817484),
                ],
                [(6.870130732069, 2.9354812752398), (8.887451155252, 1.3637040130053)],
                [
                    (8.5904223812864, 1.4008326097509),
                    (12.7364490178894, 5.1384446821513),
                ],
                [
                    (12.7735776146351, 4.8785445049314),
                    (11.1399193578244, 8.7399185664841),
                ],
                [
                    (11.4369481317899, 8.5666517816708),
                    (7.0681499147127, 9.6557572862113),
                ],
                [
                    (7.3032976941021, 9.7300144797027),
                    (5.2736010720039, 8.3067516044509),
                ],
                [
                    (5.5582536470543, 8.3686325990271),
                    (3.1696472564143, 9.0369473404497),
                ],
                [(3.5161808260408, 9.160709329602), (2.092917950789, 6.5493313584879)],
                [
                    (5.0434037721806, 9.2448674822256),
                    (2.0347498158874, 5.3649291223001),
                ],
                [(3.2599935084955, 2.1656817027123), (6.47285474689, 9.7758064156891)],
            ],
            [
                (2.159462509705729, 6.671426157891635),
                (2.5805952988140595, 3.0467189476928516),
                (2.638354325598988, 6.143333128036739),
                (3.379903180527609, 2.4497050360425914),
                (3.4118007349190735, 8.969194553717793),
                (3.701897526764716, 4.9705217897649385),
                (4.264121533147502, 1.7892703405672201),
                (4.5768621736158845, 8.643218814393292),
                (5.417865039186026, 8.407912313145685),
                (6.096157203228256, 8.883544013541155),
                (7.026495822331487, 2.8136508061395875),
                (7.163501772141028, 9.631986851498288),
                (8.706032782862849, 1.5050545240078805),
                (11.186846406817267, 8.629000087046414),
                (12.683727768271693, 5.090916869063097),
            ],
        ),
    ),
)
def test_bentyle_ottmann(lines, output):
    assert find_intersections(lines=lines) == output
